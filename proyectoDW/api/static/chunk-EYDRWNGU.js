import{a as k}from"./chunk-XW5VHITR.js";import{a as D}from"./chunk-WBBBMSH4.js";import{a as T}from"./chunk-QPFGTPJK.js";import{a as P}from"./chunk-BLXWA4ID.js";import"./chunk-M7VDHMM2.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AAHKYY7C.js";import"./chunk-YOQU7OJT.js";import"./chunk-W5CSRS4J.js";import"./chunk-2Y3VSUBF.js";import"./chunk-7RJOF6FO.js";import"./chunk-XW2NLRB7.js";import"./chunk-PKG65ASR.js";import"./chunk-6KG2E3QT.js";import"./chunk-XROYUJS6.js";import"./chunk-ZC7RGWIF.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-JC3QQ35R.js";import"./chunk-CKP3SGE2.js";import"./chunk-DLKZZR2U.js";import"./chunk-3W6LJROD.js";import{R as w,V as z,W as M,X as S,aa as B,g as y,k as N,m as I,ma as E}from"./chunk-TEIXOV6V.js";import{Fa as f,Kb as _,O as v,Ra as b,Sa as g,T as i,Wa as A,Xa as s,Ya as n,ea as p,ib as d,jb as C,o as m,sa as l,sb as u,ub as h}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var c=class o{authService=i(T);httpClient=i(y);baseURL(t,e){return P.apiURL+`usuarios/${t}/pozos/${e}/niveles_aporte`}getUserIdOrThrow(){let t=this.authService.userId();if(!t)throw new Error("No se encontr\xF3 id_usuario autenticado");return t}async createNivelAporte(t,e){let r=this.getUserIdOrThrow();try{return await m(this.httpClient.post(this.baseURL(r,t),e))}catch(a){throw console.log("Mensaje de error",a.error.message),a.status===0?new Error(a.message):new Error("La profundidad debe ser >= 0")}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=v({token:o,factory:o.\u0275fac,providedIn:"root"})};function j(o,t){if(o&1&&(s(0,"p",4),u(1),n()),o&2){let e=C();l(),h(" ",e.errorMessage()," ")}}var R=class o{aporteCreateService=i(c);toastController=i(k);router=i(I);activateRoute=i(N);errorMessage=p("");disabled=p(!1);id_pozo=_.required();nivelAp=p({profundidad_m:0});async guardarIntervaloLit(t){let e=this.id_pozo();try{this.disabled.set(!0);let r=await this.aporteCreateService.createNivelAporte(e,t);console.log("Nivel aporte creado: ",r),this.router.navigate([`/pozos/${e}/aportes-list`])}catch(r){await(await this.toastController.create({message:r.message,duration:1e3,position:"bottom",color:"danger",animated:!0})).present()}this.disabled.set(!1)}irAtras(){this.router.navigate([`pozos/${this.id_pozo()}/aportes-list`])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-aportes-create"]],inputs:{id_pozo:[1,"id_pozo"]},decls:10,vars:2,consts:[[1,"ion-padding"],["slot","start","color","primary"],["default-href","#","color","primary",3,"click"],[3,"saved","nivelAporte"],[1,"error"]],template:function(e,r){e&1&&(s(0,"ion-content",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-back-button",2),d("click",function(){return r.irAtras()}),n()()(),s(4,"ion-card")(5,"ion-card-content")(6,"h2"),u(7,"Crear un nuevo nivel de aporte"),n(),s(8,"app-aportes-form",3),d("saved",function(x){return r.guardarIntervaloLit(x)}),n(),b(9,j,2,1,"p",4),n()()()),e&2&&(l(8),A("nivelAporte",r.nivelAp()),l(),g(r.errorMessage()?9:-1))},dependencies:[B,M,S,D,E,w,z],encapsulation:2})};export{R as AportesCreatePage};
