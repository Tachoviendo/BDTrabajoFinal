import{a as E}from"./chunk-NUG3AV6E.js";import{a as x}from"./chunk-BLXWA4ID.js";import{W as M,X as w,aa as I,e as y,g as h,m as _,oa as P}from"./chunk-TEIXOV6V.js";import{Fa as p,O as d,Ra as f,Sa as g,T as t,Wa as b,Xa as c,Ya as a,ea as s,ib as C,jb as U,o as m,sa as n,sb as l,ub as v}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var u=class r{baseURL=x.apiURL+"usuarios";httpClient=t(h);async createUsuario(o){try{return await m(this.httpClient.post(this.baseURL,o))}catch(e){throw console.log("Mensaje de error",e.error.message),e.status===0?new Error(e.message):new Error("Formato de Email incorrecto")}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"})};function j(r,o){if(r&1&&(c(0,"p",2),l(1),a()),r&2){let e=U();n(),v(" ",e.errorMessage()," ")}}var R=class r{toastController=t(P);createService=t(u);router=t(_);errorMessage=s("");disabled=s(!1);roles=s([{id_rol:1,nombre:"administracion",descr:"Administraci\xF3n"},{id_rol:2,nombre:"perforador",descr:"T\xE9cnico de perforaci\xF3n"},{id_rol:3,nombre:"propietario",descr:"Propietario del sitio"}]);async guardarUsuario(o){console.log(o);try{this.disabled.set(!0);let e=await this.createService.createUsuario(o);console.log("Usuario creado: ",e),this.router.navigate(["/usuarios-list"])}catch(e){await(await this.toastController.create({message:e.message,duration:1e3,position:"bottom",color:"danger",animated:!0})).present()}this.disabled.set(!1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=p({type:r,selectors:[["app-usuarios-create"]],decls:7,vars:2,consts:[[1,"ion-padding"],[3,"saved","roles"],[1,"error"]],template:function(e,i){e&1&&(c(0,"ion-content",0)(1,"ion-card")(2,"ion-card-content")(3,"h2"),l(4,"Crear nuevo usuario"),a(),c(5,"app-usuario-form",1),C("saved",function(S){return i.guardarUsuario(S)}),a(),f(6,j,2,1,"p",2),a()()()),e&2&&(n(5),b("roles",i.roles()),n(),g(i.errorMessage()?6:-1))},dependencies:[y,I,M,w,E],encapsulation:2})};export{R as UsuariosCreatePage};
