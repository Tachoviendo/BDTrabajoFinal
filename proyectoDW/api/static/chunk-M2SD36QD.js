import{a as N}from"./chunk-TE2OJY6Y.js";import{a as k}from"./chunk-QPFGTPJK.js";import{a as T}from"./chunk-BLXWA4ID.js";import"./chunk-3W6LJROD.js";import{R as P,V as w,W as z,X as M,aa as S,g as C,m as y,ma as B,oa as E}from"./chunk-TEIXOV6V.js";import{Fa as f,Kb as h,O as v,Ra as g,Sa as I,T as a,Wa as b,Xa as s,Ya as n,ea as m,ib as d,jb as D,o as u,sa as l,sb as p,ub as _}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var c=class o{authService=a(k);httpClient=a(C);baseURL(t,e){return T.apiURL+`usuarios/${t}/pozos/${e}/intervalo_diametro_perforacion`}getUserIdOrThrow(){let t=this.authService.userId();if(!t)throw new Error("No se encontr\xF3 id_usuario autenticado");return t}async createIntervaloDiametro(t,e){let r=this.getUserIdOrThrow();try{return await u(this.httpClient.post(this.baseURL(r,t),e))}catch(i){throw console.log("Mensaje de error",i.error.message),i.status===0?new Error(i.message):new Error("'Hasta' debe ser mayor que 'desde'")}}static \u0275fac=function(e){return new(e||o)};static \u0275prov=v({token:o,factory:o.\u0275fac,providedIn:"root"})};function R(o,t){if(o&1&&(s(0,"p",4),p(1),n()),o&2){let e=D();l(),_(" ",e.errorMessage()," ")}}var x=class o{createIntDiamService=a(c);toastController=a(E);router=a(y);errorMessage=m("");disabled=m(!1);id_pozo=h.required();intervaloDiametro=m({desde_m:0,hasta_m:0,diametro_pulg:0});async guardarIntDiametro(t){let e=this.id_pozo();try{this.disabled.set(!0);let r=await this.createIntDiamService.createIntervaloDiametro(e,t);console.log("Intervalo diametro creado: ",r),this.router.navigate([`/pozos/${e}/intervalos-diametros-list`])}catch(r){await(await this.toastController.create({message:r.message,duration:1e3,position:"bottom",color:"danger",animated:!0})).present()}this.disabled.set(!1)}irAtras(){this.router.navigate([`pozos/${this.id_pozo()}/intervalos-diametros-list`])}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=f({type:o,selectors:[["app-intervalos-diametros-create"]],inputs:{id_pozo:[1,"id_pozo"]},decls:10,vars:2,consts:[[1,"ion-padding"],["slot","start","color","primary"],["default-href","#","color","primary",3,"click"],[3,"saved","intervaloDiametro"],[1,"error"]],template:function(e,r){e&1&&(s(0,"ion-content",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-back-button",2),d("click",function(){return r.irAtras()}),n()()(),s(4,"ion-card")(5,"ion-card-content")(6,"h2"),p(7,"Crear un nuevo diametro de perforaci\xF3n"),n(),s(8,"app-intervalo-diam-form",3),d("saved",function(j){return r.guardarIntDiametro(j)}),n(),g(9,R,2,1,"p",4),n()()()),e&2&&(l(8),b("intervaloDiametro",r.intervaloDiametro()),l(),I(r.errorMessage()?9:-1))},dependencies:[S,z,M,N,B,w,P],encapsulation:2})};export{x as IntervalosDiametrosCreatePage};
