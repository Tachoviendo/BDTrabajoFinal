import{a as P}from"./chunk-752EIIM4.js";import{a as x}from"./chunk-BLXWA4ID.js";import{W as _,X as w,aa as I,g as h,k as y,m as M}from"./chunk-TEIXOV6V.js";import{Fa as u,O as l,Ra as f,Sa as g,T as r,Wa as b,Xa as c,Ya as a,ea as s,ib as S,jb as v,o as d,sa as n,sb as m,ub as C}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var p=class t{baseURL(i){return x.apiURL+`usuarios/${i}/sitios`}httpClient=r(h);async createSitio(i,e){try{return await d(this.httpClient.post(this.baseURL(i),e))}catch(o){throw console.log("Mensaje de error",o.error.message),o.status===0?new Error(o.message):new Error(o.error.message)}}static \u0275fac=function(e){return new(e||t)};static \u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"})};function N(t,i){if(t&1&&(c(0,"p",2),m(1),a()),t&2){let e=v();n(),C(" ",e.errorMessage()," ")}}var R=class t{sitiosCreateService=r(p);router=r(M);activateRoute=r(y);errorMessage=s("");disabled=s(!1);sitio=s({departamento:""});idUsuario=Number(this.activateRoute.snapshot.paramMap.get("id_usuario"));async guardarSitio(i){try{this.disabled.set(!0);let e=await this.sitiosCreateService.createSitio(this.idUsuario,i);console.log("sitio creado: ",e),this.router.navigate(["/sitios-list"])}catch(e){this.errorMessage.set(e.message)}this.disabled.set(!1)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-sitios-create"]],decls:7,vars:2,consts:[[1,"ion-padding"],[3,"saved","sitio"],[1,"error"]],template:function(e,o){e&1&&(c(0,"ion-content",0)(1,"ion-card")(2,"ion-card-content")(3,"h2"),m(4,"Crear un nuevo sitio"),a(),c(5,"app-sitios-form",1),S("saved",function(D){return o.guardarSitio(D)}),a(),f(6,N,2,1,"p",2),a()()()),e&2&&(n(5),b("sitio",o.sitio()),n(),g(o.errorMessage()?6:-1))},dependencies:[I,_,w,P],encapsulation:2})};export{R as SitiosCreatePage};
