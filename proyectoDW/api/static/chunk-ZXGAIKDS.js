import{a as R}from"./chunk-QPFGTPJK.js";import{a as O}from"./chunk-BLXWA4ID.js";import"./chunk-3W6LJROD.js";import{U as y,W as V,X as P,Y as T,_ as k,aa as U,da as $,ea as A,fa as F,g as L,m as C}from"./chunk-TEIXOV6V.js";import{Fa as h,O as g,T as a,Ua as v,Va as x,Xa as e,Y as S,Ya as o,Z as f,ea as I,fb as w,ib as b,jb as _,o as u,sa as s,sb as n,tb as l,ub as E}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var c=class r{baseURL(t){return O.apiURL+`usuarios/${t}/sitios`}httpClient=a(L);authService=a(R);getUserIdOrThrow(){let t=this.authService.userId();if(!t)throw new Error("No se encontr\xF3 id_usuario autenticado");return t}async getAllSitios(){let t=this.getUserIdOrThrow();return await u(this.httpClient.get(this.baseURL(t)))}async deleteSitio(t){let i=this.getUserIdOrThrow();await u(this.httpClient.delete(`${this.baseURL(i)}/${t}`))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var N=(r,t)=>t.id_sitio;function W(r,t){if(r&1){let i=w();e(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),n(3),o()(),e(4,"ion-card-content")(5,"ion-list")(6,"ion-item")(7,"ion-label"),n(8,"Departamento"),o(),e(9,"ion-label"),n(10),o()(),e(11,"ion-item")(12,"ion-label"),n(13,"Localidad"),o(),e(14,"ion-label"),n(15),o()(),e(16,"ion-item")(17,"ion-label"),n(18,"Latitud"),o(),e(19,"ion-label"),n(20),o()(),e(21,"ion-item")(22,"ion-label"),n(23,"Longitud"),o(),e(24,"ion-label"),n(25),o()()(),e(26,"ion-button",0),b("click",function(){let d=S(i).$implicit,p=_();return f(p.irAEditar(d))}),n(27,"Editar"),o(),e(28,"ion-button",1),b("click",function(){let d=S(i).$implicit,p=_();return f(p.borrarSitio(d))}),n(29," Borrar "),o()()()}if(r&2){let i=t.$implicit;s(3),E("Sitio: ",i.id_sitio),s(7),l(i.departamento),s(5),l(i.localidad),s(5),l(i.latitud),s(5),l(i.longitud)}}var D=class r{sitioListService=a(c);router=a(C);sitios=I([]);async ngOnInit(){let t=await this.sitioListService.getAllSitios();this.sitios.set(t)}async ionViewWillEnter(){let t=await this.sitioListService.getAllSitios();this.sitios.set(t)}irAEditar(t){this.router.navigate(["/sitios-edit",t.id_sitio])}async borrarSitio(t){await this.sitioListService.deleteSitio(t.id_sitio),this.ionViewWillEnter()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=h({type:r,selectors:[["app-sitios-list"]],decls:3,vars:0,consts:[[3,"click"],["color","danger",3,"click"]],template:function(i,m){i&1&&(e(0,"ion-content"),v(1,W,30,5,"ion-card",null,N),o()),i&2&&(s(),x(m.sitios()))},dependencies:[y,U,V,T,k,P,F,$,A],encapsulation:2})};export{D as SitiosListPage};
