import{a as W}from"./chunk-QPFGTPJK.js";import{a as M}from"./chunk-BLXWA4ID.js";import"./chunk-3W6LJROD.js";import{R as P,U as S,V as T,W as y,X as V,Y as $,_ as F,aa as U,da as O,ea as R,fa as B,g as z,k as L,m as k,ma as D}from"./chunk-TEIXOV6V.js";import{Fa as A,O as b,Ra as g,Sa as C,T as s,Ua as I,Va as N,Xa as n,Y as v,Ya as o,Z as f,ea as h,fb as w,ib as d,jb as l,o as _,sa as c,sb as a,tb as x,ub as E}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var m=class i{baseURL(e,t){return M.apiURL+`usuarios/${e}/pozos/${t}/niveles_aporte`}authService=s(W);httpClient=s(z);getUserIdOrThrow(){let e=this.authService.userId();if(!e)throw new Error("No se encontr\xF3 id_usuario autenticado");return e}async getNivelesAporte(e){let t=this.getUserIdOrThrow();return await _(this.httpClient.get(this.baseURL(t,e)))}async deleteNivelAporte(e,t){let r=this.getUserIdOrThrow();await _(this.httpClient.delete(`${this.baseURL(r,e)}/${t.id_nivel_aporte}`))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};var q=(i,e)=>e.id_nivel_aporte;function G(i,e){i&1&&(n(0,"ion-content"),a(1,"Pozo No Encontrado"),o())}function J(i,e){if(i&1){let t=w();n(0,"ion-button",4),d("click",function(){v(t);let p=l().$implicit,u=l();return f(u.irAEditar(p))}),a(1,"Editar"),o(),n(2,"ion-button",5),d("click",function(){v(t);let p=l().$implicit,u=l();return f(u.borrarNivelAporte(p))}),a(3," Borrar "),o()}}function K(i,e){if(i&1&&(n(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),a(3),o()(),n(4,"ion-card-content")(5,"ion-list")(6,"ion-item")(7,"ion-label"),a(8,"Desde: "),o(),n(9,"ion-label"),a(10),o()()(),g(11,G,2,0,"ion-content")(12,J,4,0),o()()),i&2){let t=e.$implicit,r=l();c(3),E("Nivel Aporte ",t.id_nivel_aporte),c(7),x(t.profundidad_m),c(),C(r.id_pozo?12:11)}}var j=class i{aporteListService=s(m);ruta=s(L);nivelesAporte=h([]);id_pozo=null;router=s(k);ngOnInit(){this.id_pozo=Number(this.ruta.snapshot.paramMap.get("id_pozo")),this.cargarNivelesAporte()}ionViewWillEnter(){this.id_pozo=Number(this.ruta.snapshot.paramMap.get("id_pozo")),this.cargarNivelesAporte()}async cargarNivelesAporte(){if(!this.id_pozo)throw new Error("Pozo no encontrado");let e=await this.aporteListService.getNivelesAporte(this.id_pozo);this.nivelesAporte.set(e),this.ionViewWillEnter()}async borrarNivelAporte(e){if(!this.id_pozo)throw new Error("Pozo no encontrado");await this.aporteListService.deleteNivelAporte(this.id_pozo,e),this.ionViewWillEnter()}irAEditar(e){console.log(e,e.id_nivel_aporte),this.router.navigate([`/pozos/${this.id_pozo}/aportes-edit/${e.id_nivel_aporte}`])}irACrear(){this.router.navigate([`/pozos/${this.id_pozo}/aportes-create`])}irAtras(){this.router.navigate(["/pozos-list"])}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=A({type:i,selectors:[["app-aportes-list"]],decls:9,vars:0,consts:[["slot","end","color","primary"],["color","primary","fill","solid",3,"click"],["slot","start","color","primary"],["default-href","#","color","primary",3,"click"],[3,"click"],["color","danger",3,"click"]],template:function(t,r){t&1&&(n(0,"ion-content")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),d("click",function(){return r.irACrear()}),a(4,"Crear Nivel de Aporte"),o()(),n(5,"ion-buttons",2)(6,"ion-back-button",3),d("click",function(){return r.irAtras()}),o()()(),I(7,K,13,3,"ion-card",null,q),o()),t&2&&(c(7),N(r.nivelesAporte()))},dependencies:[U,S,y,$,F,V,B,O,R,T,D,P],encapsulation:2})};export{j as AportesListPage};
