import{a as q}from"./chunk-QPFGTPJK.js";import{a as G}from"./chunk-BLXWA4ID.js";import"./chunk-3W6LJROD.js";import{S as F,U as $,V as A,W as D,X as N,Y as O,Z as U,_ as M,aa as R,d as V,da as j,ea as B,fa as W,g as k,m as T,ma as H}from"./chunk-TEIXOV6V.js";import{Ab as L,Bb as y,Fa as w,Ka as E,O as I,T as m,Ua as S,Va as C,Wa as v,Xa as i,Y as d,Ya as o,Z as _,ea as h,fb as f,ib as u,jb as c,o as g,sa as a,sb as n,tb as z,ub as P,yb as b}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var x=class r{baseURL(e){return G.apiURL+`usuarios/${e}/pozos`}httpClient=m(k);auth=m(q);getUserIdOrThrow(){let e=this.auth.userId();if(!e)throw new Error("No se encontr\xF3 id_usuario autenticado");return e}async getListaPozos(){let e=this.getUserIdOrThrow();return await g(this.httpClient.get(this.baseURL(e)))}async deletePozo(e){let t=this.getUserIdOrThrow();await g(this.httpClient.delete(`${this.baseURL(t)}/${e}`))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=I({token:r,factory:r.\u0275fac,providedIn:"root"})};var Q=(r,e)=>e.id_pozo;function X(r,e){if(r&1){let t=f();i(0,"ion-list")(1,"ion-item",6),u("click",function(){d(t);let s=c().$implicit,l=c();return _(l.irAIntervaloLit(s))}),n(2,"Intervalos Litol\xF3gicos"),o(),i(3,"ion-item",6),u("click",function(){d(t);let s=c().$implicit,l=c();return _(l.irAIntervaloPer(s))}),n(4,"Intervalos Diametros Perforaci\xF3n"),o(),i(5,"ion-item",6),u("click",function(){d(t);let s=c().$implicit,l=c();return _(l.irANivelesA(s))}),n(6,"Niveles de Aporte"),o()()}}function Y(r,e){if(r&1){let t=f();i(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),n(3),o(),i(4,"ion-card-subtitle"),n(5),o()(),i(6,"ion-card-content")(7,"ion-list")(8,"ion-item")(9,"ion-label"),n(10,"ID Propietario"),o(),i(11,"ion-label"),n(12),o()(),i(13,"ion-item")(14,"ion-label"),n(15,"ID Sitio"),o(),i(16,"ion-label"),n(17),o()(),i(18,"ion-item")(19,"ion-label"),n(20,"Profundidad (m)"),o(),i(21,"ion-label"),n(22),o()(),i(23,"ion-item")(24,"ion-label"),n(25,"Sello sanitario"),o(),i(26,"ion-label"),n(27),o()(),i(28,"ion-item")(29,"ion-label"),n(30,"Fecha creado"),o(),i(31,"ion-label"),n(32),L(33,"date"),o()()(),i(34,"ion-toolbar")(35,"ion-buttons",0)(36,"ion-button",1),n(37," T\xE9cnica "),o()(),i(38,"ion-popover",2),E(39,X,7,0,"ng-template"),o(),i(40,"ion-buttons",3)(41,"ion-button",4),u("click",function(){let s=d(t).$implicit,l=c();return _(l.irAEditar(s))}),n(42,"Editar"),o(),i(43,"ion-button",5),u("click",function(){let s=d(t).$implicit,l=c();return _(l.borrarPozo(s))}),n(44," Borrar "),o()()()()()}if(r&2){let t=e.$implicit;a(3),P("Pozo: ",t.id_pozo),a(2),P("Empresa: ",t.empresa||"-"),a(7),z(t.id_propietario),a(5),z(t.id_sitio),a(5),z(t.profundidad_final_m??"-"),a(5),z(t.sello_sanitario?"S\xED":"No"),a(5),P(" ",y(33,12,t.fecha_creado,"dd/MM/yyyy")," "),a(4),v("id",b("popover-",t.id_pozo)),a(2),v("trigger",b("popover-",t.id_pozo))("dismissOnSelect",!0)}}var J=class r{pozosListService=m(x);router=m(T);pozos=h([]);async ngOnInit(){await this.cargarPozos()}async ionViewWillEnter(){await this.cargarPozos()}async cargarPozos(){let e=await this.pozosListService.getListaPozos();this.pozos.set(e)}irAEditar(e){this.router.navigate(["/pozo-edit",e.id_pozo])}irAIntervaloLit(e){this.router.navigate([`/pozos/${e.id_pozo}/intervalos-litologicos-list`])}irAIntervaloPer(e){this.router.navigate([`/pozos/${e.id_pozo}/intervalos-diametros-list`])}irANivelesA(e){this.router.navigate([`/pozos/${e.id_pozo}/aportes-list`])}async borrarPozo(e){await this.pozosListService.deletePozo(e.id_pozo),await this.ionViewWillEnter()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=w({type:r,selectors:[["app-pozos-list"]],decls:3,vars:0,consts:[["slot","start"],["color","primary",3,"id"],[3,"dismissOnSelect","trigger"],["slot","end"],["color","primary",3,"click"],["color","danger",3,"click"],["button","",1,"popover",3,"click"]],template:function(t,p){t&1&&(i(0,"ion-content"),S(1,Y,45,15,"ion-card",null,Q),o()),t&2&&(a(),C(p.pozos()))},dependencies:[$,D,O,M,R,U,N,W,j,B,F,H,A,V],styles:[".popover[_ngcontent-%COMP%]{--background: transparent;--border-radius: 20px;--detail-icon-color: transparent;--detail-icon-font-size: 20px;--border-width: 0}"]})};export{J as PozosListPage};
