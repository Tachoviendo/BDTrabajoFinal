import{a as j}from"./chunk-QPFGTPJK.js";import{a as D}from"./chunk-BLXWA4ID.js";import"./chunk-3W6LJROD.js";import{R as y,U as T,V as $,W as F,X as V,Y as A,_ as M,aa as O,da as N,ea as U,fa as R,g as S,k,m as P,ma as B}from"./chunk-TEIXOV6V.js";import{Fa as f,O as I,Ra as h,Sa as x,T as a,Ua as C,Va as w,Xa as n,Y as _,Ya as o,Z as L,ea as b,fb as E,ib as d,jb as c,o as v,sa as s,sb as r,tb as u,ub as z}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var g=class e{baseURL(t,i){return D.apiURL+`usuarios/${t}/pozos/${i}/intervalo_litologico`}authService=a(j);httpClient=a(S);getUserIdOrThrow(){let t=this.authService.userId();if(!t)throw new Error("No se encontr\xF3 id_usuario autenticado");return t}async getIntervalosLitologicos(t){let i=this.getUserIdOrThrow();return await v(this.httpClient.get(this.baseURL(i,t)))}async deleteIntervaloLitologico(t,i){let l=this.getUserIdOrThrow();await v(this.httpClient.delete(`${this.baseURL(l,t)}/${i.id_intervalo_litologico}`))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};var q=(e,t)=>t.id_intervalo_litologico;function G(e,t){e&1&&(n(0,"ion-content"),r(1,"Pozo No Encontrado"),o())}function J(e,t){if(e&1){let i=E();n(0,"ion-button",4),d("click",function(){_(i);let m=c().$implicit,p=c();return L(p.irAEditar(p.id_pozo,m))}),r(1,"Editar"),o(),n(2,"ion-button",5),d("click",function(){_(i);let m=c().$implicit,p=c();return L(p.borrarIntervaloLit(m))}),r(3," Borrar "),o()}}function K(e,t){if(e&1&&(n(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),r(3),o()(),n(4,"ion-card-content")(5,"ion-list")(6,"ion-item")(7,"ion-label"),r(8,"Desde: "),o(),n(9,"ion-label"),r(10),o()(),n(11,"ion-item")(12,"ion-label"),r(13,"Hasta: "),o(),n(14,"ion-label"),r(15),o()(),n(16,"ion-item")(17,"ion-label"),r(18,"Material: "),o(),n(19,"ion-label"),r(20),o()()(),h(21,G,2,0,"ion-content")(22,J,4,0),o()()),e&2){let i=t.$implicit,l=c();s(3),z("Intervalo Litol\xF3gico: ",i.id_intervalo_litologico),s(7),u(i.desde_m),s(5),u(i.hasta_m),s(5),u(i.material),s(),x(l.id_pozo?22:21)}}var W=class e{intervaloLitologicoListService=a(g);ruta=a(k);intervalosLitologicos=b([]);id_pozo=null;router=a(P);ngOnInit(){this.id_pozo=Number(this.ruta.snapshot.paramMap.get("id_pozo")),this.cargarIntervalosLitologicos()}ionViewWillEnter(){this.id_pozo=Number(this.ruta.snapshot.paramMap.get("id_pozo")),this.cargarIntervalosLitologicos()}async cargarIntervalosLitologicos(){if(!this.id_pozo)throw new Error("Pozo no encontrado");let t=await this.intervaloLitologicoListService.getIntervalosLitologicos(this.id_pozo);this.intervalosLitologicos.set(t)}async borrarIntervaloLit(t){if(!this.id_pozo)throw new Error("Pozo no encontrado");await this.intervaloLitologicoListService.deleteIntervaloLitologico(this.id_pozo,t),await this.ionViewWillEnter()}irAEditar(t,i){this.router.navigate([`pozos/${t}/intervalos-litologicos-edit/${i.id_intervalo_litologico}`])}irAIntervaloLit(){this.router.navigate([`/pozos/${this.id_pozo}/intervalos-litologicos-create`])}irAtras(){this.router.navigate(["/pozos-list"])}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=f({type:e,selectors:[["app-intervalos-litologicos-list"]],decls:9,vars:0,consts:[["slot","end","color","primary"],["color","primary","fill","solid",3,"click"],["slot","start","color","primary"],["default-href","#","color","primary",3,"click"],[3,"click"],["color","danger",3,"click"]],template:function(i,l){i&1&&(n(0,"ion-content")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),d("click",function(){return l.irAIntervaloLit()}),r(4,"Crear Intervalo Litol\xF3gico"),o()(),n(5,"ion-buttons",2)(6,"ion-back-button",3),d("click",function(){return l.irAtras()}),o()()(),C(7,K,23,5,"ion-card",null,q),o()),i&2&&(s(7),w(l.intervalosLitologicos()))},dependencies:[O,F,A,M,V,R,N,U,T,$,B,y],styles:["ion-header[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--background: transparent}"]})};export{W as IntervalosLitologicosListPage};
