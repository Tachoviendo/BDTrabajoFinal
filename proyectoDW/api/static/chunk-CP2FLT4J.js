import{a as N}from"./chunk-6LSNIT6D.js";import{a as D}from"./chunk-QPFGTPJK.js";import{a as k}from"./chunk-BLXWA4ID.js";import"./chunk-3W6LJROD.js";import{R as z,V as S,W as M,X as P,aa as B,g as C,k as y,m as w,ma as E,oa as T}from"./chunk-TEIXOV6V.js";import{Fa as v,Kb as h,O as g,Ra as f,Sa as b,T as r,Wa as I,Xa as l,Ya as n,ea as s,ib as p,jb as L,o as m,sa as c,sb as u,ub as _}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var d=class i{authService=r(D);httpClient=r(C);baseURL(e,o){return k.apiURL+`usuarios/${e}/pozos/${o}/intervalo_litologico`}getUserIdOrThrow(){let e=this.authService.userId();if(!e)throw new Error("No se encontr\xF3 id_usuario autenticado");return e}async createIntervaloLit(e,o){let t=await this.getUserIdOrThrow();try{return await m(this.httpClient.post(this.baseURL(t,e),o))}catch(a){throw console.log("Mensaje de error",a.error.message),a.status===0?new Error(a.message):new Error("'Hasta' debe ser mayor que 'desde'")}}static \u0275fac=function(o){return new(o||i)};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})};function j(i,e){if(i&1&&(l(0,"p",4),u(1),n()),i&2){let o=L();c(),_(" ",o.errorMessage()," ")}}var R=class i{createService=r(d);toastController=r(T);router=r(w);activateRoute=r(y);errorMessage=s("");disabled=s(!1);id_pozo=h.required();intervaloLitologico=s({desde_m:0,hasta_m:0,material:""});async guardarIntervaloLit(e){let o=this.id_pozo();try{this.disabled.set(!0);let t=await this.createService.createIntervaloLit(o,e);console.log("Intervalo creado creado: ",t),this.router.navigate([`/pozos/${o}/intervalos-litologicos-list`])}catch(t){await(await this.toastController.create({message:t.message,duration:1e3,position:"bottom",color:"danger",animated:!0})).present()}this.disabled.set(!1)}irAtras(){this.router.navigate([`pozos/${this.id_pozo()}/intervalos-litologicos-list`])}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=v({type:i,selectors:[["app-intervalos-litologicos-create"]],inputs:{id_pozo:[1,"id_pozo"]},decls:10,vars:2,consts:[[1,"ion-padding"],["slot","start","color","primary"],["default-href","#","color","primary",3,"click"],[3,"saved","intervaloLitologico"],[1,"error"]],template:function(o,t){o&1&&(l(0,"ion-content",0)(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-back-button",2),p("click",function(){return t.irAtras()}),n()()(),l(4,"ion-card")(5,"ion-card-content")(6,"h2"),u(7,"Crear un nuevo intervalo litol\xF3gico"),n(),l(8,"app-intervalo-lit-form",3),p("saved",function(x){return t.guardarIntervaloLit(x)}),n(),f(9,j,2,1,"p",4),n()()()),o&2&&(c(8),I("intervaloLitologico",t.intervaloLitologico()),c(),b(t.errorMessage()?9:-1))},dependencies:[B,M,P,N,E,S,z],encapsulation:2})};export{R as IntervalosLitologicosCreatePage};
