import{a as F,b as k}from"./chunk-PA3RXIL6.js";import"./chunk-QPFGTPJK.js";import{a as E}from"./chunk-BLXWA4ID.js";import"./chunk-3W6LJROD.js";import{R as y,V as M,W as N,X as I,aa as S,g as C,m as h,ma as w}from"./chunk-TEIXOV6V.js";import{Fa as z,Kb as _,O as d,Ra as f,Sa as g,T as i,Wa as P,Xa as a,Ya as n,ea as s,ib as l,jb as b,o as m,sa as p,sb as u,ub as v}from"./chunk-5T4QEHQE.js";import"./chunk-6GMPNWKN.js";import"./chunk-GIEMQNDR.js";import"./chunk-WQS6UKMC.js";import"./chunk-HVWPZZJ7.js";import"./chunk-HSZY262W.js";import"./chunk-VSDHJBUA.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-NWJ5J3BN.js";var c=class r{baseURL(e){return E.apiURL+`usuarios/${e}/pozos`}httpClient=i(C);async createPozo(e,t){try{return await m(this.httpClient.post(this.baseURL(e),t))}catch(o){throw console.log("Mensaje de error",o.error.message),o.status===0?new Error(o.message):new Error(o.error.message)}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=d({token:r,factory:r.\u0275fac,providedIn:"root"})};function T(r,e){if(r&1&&(a(0,"p",4),u(1),n()),r&2){let t=b();p(),v(" ",t.errorMessage()," ")}}var D=class r{createService=i(c);router=i(h);errorMessage=s("");disabled=s(!1);id_pozo=_.required();fotoPozoService=i(k);nuevoPozo=s({id_propietario:0,id_sitio:0,id_perforador:0});async guardarPozo(e){console.log(e.pozo);let t=e.pozo.id_propietario;try{this.disabled.set(!0),console.log("NUEVO POZO",this.nuevoPozo());let o=await this.createService.createPozo(t,e.pozo);e.foto&&await this.fotoPozoService.subirFoto(t,o.id_pozo,e.foto),console.log("Pozo creado: ",o),this.router.navigate(["pozos-list"])}catch(o){this.errorMessage.set(o.message)}this.disabled.set(!1)}irAtras(){this.router.navigate(["pozo"])}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=z({type:r,selectors:[["app-pozos-create"]],inputs:{id_pozo:[1,"id_pozo"]},decls:11,vars:4,consts:[[1,"ion-padding"],["slot","start","color","primary"],["default-href","#","color","primary",3,"click"],[3,"saved","pozo","id_pozo","agregareditar"],[1,"error"]],template:function(t,o){t&1&&(a(0,"ion-content",0)(1,"ion-content")(2,"ion-toolbar")(3,"ion-buttons",1)(4,"ion-back-button",2),l("click",function(){return o.irAtras()}),n()()(),a(5,"ion-card")(6,"ion-card-content")(7,"h2"),u(8,"Crear nueva perforaci\xF3n"),n(),a(9,"app-pozos-form",3),l("saved",function(x){return o.guardarPozo(x)}),n(),f(10,T,2,1,"p",4),n()()()()),t&2&&(p(9),P("pozo",o.nuevoPozo())("id_pozo",o.id_pozo())("agregareditar",!1),p(),g(o.errorMessage()?10:-1))},dependencies:[S,N,I,F,w,M,y],encapsulation:2})};export{D as PozosCreatePage};
